<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OSMP Baseline Accessibility Audit</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: Arial, sans-serif; background:#f5f5f5; padding:20px; }
.container { max-width:1400px; margin:0 auto; background:white; padding:30px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
h1 { color:#1a1a1a; margin-bottom:5px; font-size:28px; }
.subtitle { color:#666; margin-bottom:5px; font-size:14px; }
.phase-label { background:#dbeafe; color:#1e40af; padding:5px 12px; border-radius:4px; font-size:13px; font-weight:600; display:inline-block; margin-bottom:20px; }
.stats-section { background:#f0f9ff; border:1px solid #bae6fd; border-radius:8px; padding:20px; margin-bottom:25px; display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; }
.stat-box { text-align:center; }
.stat-number { font-size:32px; font-weight:700; color:#0c4a6e; }
.stat-label { font-size:14px; color:#0369a1; margin-top:5px; }
.controls { display:flex; gap:15px; margin-bottom:25px; flex-wrap:wrap; }
.search-box { flex:1; min-width:250px; }
input[type="text"] { width:100%; padding:10px; border:1px solid #ddd; border-radius:6px; font-size:14px; }
select, button { padding:10px 16px; border:1px solid #ddd; border-radius:6px; font-size:14px; cursor:pointer; background:white; }
.btn-export { background:#16a34a; color:white; border-color:#16a34a; }
.btn-export:hover { background:#15803d; }
.btn-save { background:#2563eb; color:white; border-color:#2563eb; }
.btn-save:hover { background:#1d4ed8; }
.btn-load { background:#7c3aed; color:white; border-color:#7c3aed; }
.btn-load:hover { background:#6d28d9; }
.map-service { border:1px solid #e0e0e0; border-radius:8px; margin-bottom:20px; overflow:hidden; }
.map-header { background:#f5f5f5; padding:15px 20px; cursor:pointer; display:flex; align-items:center; gap:12px; }
.map-header:hover { background:#e8e8e8; }
.map-title { font-size:18px; font-weight:600; color:#1a1a1a; }
.map-count { font-size:14px; color:#666; }
.layers-container { padding:20px; display:none; }
.layers-container.expanded { display:block; }
.layer-item { border:1px solid #e0e0e0; border-radius:6px; margin-bottom:15px; overflow:hidden; }
.layer-header { padding:12px 15px; cursor:pointer; display:flex; align-items:center; gap:12px; }
.status-pass { background:#f0fdf4; border-color:#86efac; }
.status-fail { background:#fef2f2; border-color:#fca5a5; }
.status-needs-work { background:#fefce8; border-color:#fde047; }
.status-not-audited { background:#f9fafb; border-color:#e5e7eb; }
.layer-name { font-weight:500; color:#1a1a1a; flex:1; }
.layer-form { padding:20px; background:white; border-top:1px solid #e0e0e0; display:none; }
.layer-form.expanded { display:block; }
.form-section { margin-bottom:20px; }
.form-section h4 { font-size:14px; font-weight:600; color:#1a1a1a; margin-bottom:10px; }
.form-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; }
.form-group { display:flex; flex-direction:column; gap:6px; }
label { font-size:13px; font-weight:500; color:#555; }
textarea { width:100%; padding:10px; border:1px solid #ddd; border-radius:6px; font-size:14px; font-family:inherit; resize:vertical; }
.current-state { background:#fef3c7; border:1px solid #fbbf24; border-radius:6px; padding:15px; margin-top:15px; }
.current-state h4 { font-size:14px; font-weight:600; color:#92400e; margin-bottom:10px; }
input[type="file"] { display:none; }
.chevron { width:16px; height:16px; }
</style>
</head>
<body>
<div class="container">
<h1>OSMP Baseline Accessibility Audit</h1>
<p class="subtitle">Current State Assessment - July 2026 Audit Deadline</p>
<div class="phase-label">PHASE 1: BASELINE ASSESSMENT</div>

<div class="stats-section">
  <div class="stat-box"><div class="stat-number" id="totalLayers">0</div><div class="stat-label">Total Layers</div></div>
  <div class="stat-box"><div class="stat-number" id="auditedCount">0</div><div class="stat-label">Audited</div></div>
  <div class="stat-box"><div class="stat-number" id="passCount">0</div><div class="stat-label">Pass (No Issues)</div></div>
  <div class="stat-box"><div class="stat-number" id="failCount">0</div><div class="stat-label">Need Remediation</div></div>
</div>

<div class="controls">
  <div class="search-box"><input type="text" id="searchInput" placeholder="Search layers..." oninput="filterLayers()"></div>
  <select id="filterSelect" onchange="filterLayers()">
    <option value="all">All Statuses</option>
    <option value="not-audited">Not Audited</option>
    <option value="pass">Pass</option>
    <option value="needs-work">Needs Work</option>
    <option value="fail">Fail</option>
  </select>
  <button class="btn-export" onclick="exportBaseline()">Export Baseline</button>
  <button class="btn-save" onclick="saveBaseline()">Save Audit</button>
  <button class="btn-load" onclick="document.getElementById('fileInput').click()">Load Audit</button>
  <input type="file" id="fileInput" accept=".json" onchange="loadBaseline(event)">
</div>

<div id="mapServices"></div>
</div>

<script>
// --- Updated Layer definitions ---
var mapLayers = {
    'OSMP Trails': ['Public Notifications','Closed Trailheads','Trail Closures','Trail Difficulty','Wide Trail Opportunities','Trailheads','Trail Intersection Points','Closed Trails','Open Trails','Trail Mileage Labels','Other City Trails','Other Boulder Trails','No Public Access','Current Wildlife Closures','Habitat Conservation Area','Temporary No Public Access','Off-trail Use Prohibited'],
    'Dog Regulations': ['Public Notifications','Closed Trailheads','Trail Closures','Trailhead Fee','Trail Intersection Points','Trail Mileage Labels','Seasonal Dog Regulations','Dog Regs on Roads','Closed Trails','Dog Trail Regulation','Dog Regulation Areas','Trailhead Leash Areas','Other City Trails','Other Boulder Trails','No Public Access','Current Wildlife Closures','Habitat Conservation Area','Temporary No Public Access','Off-trail Use Prohibited','Water Regulations','Bridges'],
    'Wildlife Closures': ['Public Notifications','Closed Trailheads','Seasonal Dog Regulations','Trail Closures','Trailheads','Trail Intersection Points','Closed Trails','Open Trails','Trail Mileage Labels','Other City Trails','Other Boulder Trails','Climbing Formations','Climbing Access','Current Wildlife Closures','Habitat Conservation Areas','All Wildlife Closures','No Public Access','Current Wildlife Closures','Habitat Conservation Area','Temporary No Public Access','Off-trail Use Prohibited','Water Regulations'],
    'Horse Regulations': ['Horse Trailer Parking','Trail Intersection Points','Closed Trails','Trail Mileage Labels','Horse Trail Regulations','Horse Area Regulations','Other Boulder Trails']
};

// --- Initialize baseline data ---
var baselineData = JSON.parse(localStorage.getItem('osmpBaselineAudit') || '{}');

// --- All other JS functions remain unchanged ---
function initializeBaseline() {
    Object.keys(mapLayers).forEach(function(mapName) {
        mapLayers[mapName].forEach(function(layerName) {
            var key = mapName + '|||' + layerName;
            if (!baselineData[key]) {
                baselineData[key] = {
                    status: 'not-audited',
                    colorIssues: false,
                    colorNotes: '',
                    contrastIssues: false,
                    contrastMeasurements: '',
                    contrastNotes: '',
                    symbolIssues: false,
                    symbolNotes: '',
                    labelIssues: false,
                    labelNotes: '',
                    popupIssues: false,
                    popupNotes: 'Popup information not fully accessible programmatically',
                    popupHeaderBg: 'Popup information not fully accessible programmatically',
                    popupHeaderText: 'Popup information not fully accessible programmatically',
                    popupRestrictedBg: 'Popup information not fully accessible programmatically',
                    popupFontSize: 'Popup information not fully accessible programmatically',
                    issuesSummary: '',
                    auditDate: '',
                    auditor: ''
                };
            }
        });
    });
    localStorage.setItem('osmpBaselineAudit', JSON.stringify(baselineData));
}

// --- All other JS functions (toggleLayer, renderMapServices, updateStats, loadBaseline, saveBaseline, exportBaseline, filterLayers) remain unchanged ---

initializeBaseline();
renderMapServices();
</script>
</body>
</html>
